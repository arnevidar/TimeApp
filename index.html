<!DOCTYPE html>
<html>
  <head>
    <title>FileReader Example</title>

    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.0.css" />
	<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.1.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/phonegap-1.3.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/persistence.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/problemdomain.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/statusbarnotification.js"></script>    
	<script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    
    document.addEventListener("deviceready", onDeviceReady, false);
	$(window).bind("scrollstop", function() {
		$.mobile.fixedToolbars.show(100);
	});


    // PhoneGap is ready
    //
    function onDeviceReady() {
	checkAndCreateTimeAppFolder(fail);
	 

	
    }
	

     function populateList() {
	 $("#contentlist").empty(); //empty the list elements we've placed in the html
	 readDirectoryEntries(populateListpart2, fail);
          
          //repopulate the list with data from phonegap's device api

          //$("#contentlist").append("<li><a href='#'>Device Name: "     +device.name+     "</a></li>");
     }
     
     function populateListpart2(filelist) {
       var i;
       for (i = 0; i<filelist.length; i++) {
       $("#contentlist").append("<li><a href='#'>File: "     +filelist[i].name+     "</a></li>");  
       }
     }



	 var punchcard = {"punch": [
        {"date": 1, "company": "Intern", "project": "Vacation", "confirmed": 0},
        {"date": 2, "company": "DNB", "project": "SOAP", "confirmed": 1},
        {"date": 3, "company": "Intern", "project": "Training", "confirmed": 0}
    	]
	 };

	 

	 
	 
	 function dance(result){
	   //var json = JSON.parse(result);     
	   $("#jsontest").append("hei " + result);
	 
	 }

     function fail(error) {
     // TODO Gi beskjed hvis man ikke får skrevet data til fil
     //   console.log("Error: "+error.code);
     navigator.notification.alert(error.code, function () { navigator.app.exitApp(); }, 'Error', 'Ok');
     }	

     function beepbeep() {

	 var punch = new Punch("no", 12);
	 
	 alert(punch.totH + " " + punch.date);	



	/*	punchcard.punch[0].company = "Børge schi |'17/a";
		punchcard.punch[0].descr = "halla";
		var start = new Date().getTime();
     //   for (int i = 0; i<1000; i++) {
        var jsonString = JSON.stringify(punchcard);
		
		writefile("test.txt", jsonString, fail);
		var jsonTest = JSON.parse(jsonString);
		readfile("test.txt", dance, fail);
        
        // }
        var elapsed = new Date().getTime() - start;
        $("#jsontest").append(jsonTest.punch[0].company + " tok " + elapsed);
*/
     }
        
    </script>
  </head>
  <body>
     <div data-role="page"> 

          <div data-role="header" data-position="fixed"> 

               <h1> Header Content </h1>

          </div>

          <div data-role="content"> 

               <p> Main Page Content </p>
                    <a href="#contentpage" data-role="button" onClick=populateList()> To the List Page!</a>

    				<a href="#" data-role="button" id="beepbtn" onClick=beepbeep()> Beep!</a>
    				
    				     <p id="jsontest">
                                aa
                          </p>

          <ul data-role="listview" data-theme="g" id="contentlist">
          </ul>

          </div>

          <div data-role="footer" data-position="fixed"> 

               <h1> Footer Content </h1>

          </div>

     </div>
  </body>
</html>

